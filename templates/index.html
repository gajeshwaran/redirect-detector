<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invisible Redirect & Clickjacking Detector</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Parallax Background Layers -->
    <div class="parallax-wrapper">
        <div class="orb orb-1" data-speed="-0.2"></div>
        <div class="orb orb-2" data-speed="0.4"></div>
        <div class="orb orb-3" data-speed="-0.6"></div>
        <div class="grid-overlay"></div>
    </div>

    <div class="main-content" id="tilt-container">
        <div class="container glass-panel">
            <header>
                <div class="badge-new">v2.0 Enhanced</div>
                <h1>Link <span class="gradient-text">Analyzer</span></h1>
                <p>Reveal invisible redirects, hidden iframes, and clickjacking risks.</p>
            </header>

            <section class="input-section">
                <div class="input-wrapper">
                    <i class="fa-solid fa-link input-icon"></i>
                    <input type="text" id="urlInput" placeholder="Paste suspicious URL here..." autocomplete="off" />
                    <div class="input-border"></div>
                </div>
                <button id="analyzeBtn">
                    <span>Analyze</span>
                    <i class="fa-solid fa-rocket"></i>
                </button>
            </section>

            <div id="loading" class="hidden">
                <div class="loader">
                    <div class="scanner"></div>
                </div>
                <p>Scanning cybersecurity vectors...</p>
            </div>

            <div id="results" class="hidden">
                <!-- NEW: Safety Score & Screenshot -->
                <div class="grid-2-col" style="margin-bottom: 2rem;">
                    <div class="result-card glass-card" style="text-align: center;" data-tilt>
                        <h2>üõ°Ô∏è Security Score</h2>
                        <div class="score-circle">
                            <svg viewBox="0 0 36 36" class="circular-chart">
                                <path class="circle-bg"
                                    d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                                <path id="scoreCirclePath" class="circle" stroke-dasharray="0, 100"
                                    d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                                <text x="18" y="20.35" class="percentage" id="scoreValue">0</text>
                            </svg>
                        </div>
                        <p id="riskVerdict" style="font-size: 1.2rem; font-weight: bold; margin-top: 1rem;">-</p>
                    </div>

                    <div class="result-card glass-card" data-tilt>
                        <h2>üì∏ Live Screenshot</h2>
                        <div class="screenshot-container">
                            <img id="siteScreenshot" src="" alt="Site Screenshot" class="hidden" />
                            <div id="noScreenshot" class="empty-state">No screenshot available</div>
                        </div>
                    </div>
                </div>

                <!-- Status Card -->
                <div class="result-card glass-card" data-tilt>
                    <div class="card-header">
                        <i class="fa-solid fa-flag-checkered icon-glow"></i>
                        <h2>Final Destination</h2>
                    </div>
                    <div class="url-box">
                        <p id="finalUrl" class="url-text"></p>
                    </div>
                    <div id="destinationWarning" class="warning-badge hidden">
                        <i class="fa-solid fa-triangle-exclamation"></i> Differs from input!
                    </div>
                    <a id="openLinkBtn" href="#" target="_blank" class="safe-btn">
                        Open Safely <i class="fa-solid fa-external-link-alt"></i>
                    </a>
                </div>

                <!-- NEW: Security Headers -->
                <div class="result-card glass-card" data-tilt>
                    <div class="card-header">
                        <i class="fa-solid fa-shield-halved icon-purple"></i>
                        <h2>Security Headers</h2>
                    </div>
                    <ul id="paramsList" class="data-list"></ul>
                </div>

                <!-- Redirect Chain -->
                <div class="result-card glass-card" data-tilt>
                    <div class="card-header">
                        <i class="fa-solid fa-shoe-prints icon-blue"></i>
                        <h2>Redirect Chain</h2>
                    </div>
                    <ul id="redirectList" class="data-list"></ul>
                </div>

                <!-- Grid for Security Checks -->
                <div class="grid-2-col">
                    <div class="result-card glass-card" data-tilt>
                        <div class="card-header">
                            <i class="fa-solid fa-eye-slash icon-purple"></i>
                            <h2>Hidden Iframes</h2>
                        </div>
                        <ul id="iframeList" class="data-list"></ul>
                        <p id="noIframes" class="empty-state"><i class="fa-solid fa-check-circle"></i> No hidden iframes
                            detected.</p>
                    </div>

                    <div class="result-card glass-card" data-tilt>
                        <div class="card-header">
                            <i class="fa-solid fa-arrow-pointer icon-red"></i>
                            <h2>Clickjacking</h2>
                        </div>
                        <ul id="clickjackingList" class="data-list"></ul>
                        <p id="noClickjacking" class="empty-state"><i class="fa-solid fa-check-circle"></i> No
                            clickjacking risks.</p>
                    </div>
                </div>

                <div class="result-card glass-card" data-tilt>
                    <div class="card-header">
                        <i class="fa-solid fa-keyboard icon-orange"></i>
                        <h2>Form Risks</h2>
                    </div>
                    <ul id="formList" class="data-list"></ul>
                    <p id="noForms" class="empty-state"><i class="fa-solid fa-check-circle"></i> No hazardous forms
                        found.</p>
                </div>

                <!-- NEW: Advanced Security Scan -->
                <div class="grid-2-col">
                    <div class="result-card glass-card" data-tilt>
                        <div class="card-header">
                            <i class="fa-solid fa-user-secret icon-red"></i>
                            <h2>Security Patterns</h2>
                        </div>
                        <ul id="patternList" class="data-list"></ul>
                        <p id="noPatterns" class="empty-state"><i class="fa-solid fa-check-circle"></i> No suspicious
                            keywords found.</p>
                    </div>

                    <div class="result-card glass-card" data-tilt>
                        <div class="card-header">
                            <i class="fa-solid fa-database icon-blue"></i>
                            <h2>Storage & Cookies</h2>
                        </div>
                        <ul id="storageList" class="data-list"></ul>
                    </div>
                </div>

                <!-- NEW: Network Activity -->
                <div class="result-card glass-card" data-tilt>
                    <div class="card-header">
                        <i class="fa-solid fa-network-wired icon-teal"></i>
                        <h2>Network Activity</h2>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <span id="totalRequests" class="badge-new"
                            style="background: rgba(59, 130, 246, 0.2);">Requests: 0</span>
                    </div>
                    <h3>External Domains Contacted:</h3>
                    <ul id="externalDomainsList" class="data-list"></ul>
                    <p id="noExternal" class="empty-state"><i class="fa-solid fa-check-circle"></i> No 3rd party
                        requests.</p>
                </div>

                <div class="result-card glass-card" data-tilt>
                    <div class="card-header">
                        <i class="fa-solid fa-spider icon-teal"></i>
                        <h2>Deep Link Inspector <span class="subtitle">(Top 10)</span></h2>
                    </div>
                    <div class="table-container">
                        <table id="deepScanTable" class="hidden">
                            <thead>
                                <tr>
                                    <th>Link Text</th>
                                    <th>Analysis</th>
                                    <th>Verdict</th>
                                </tr>
                            </thead>
                            <tbody id="deepScanBody"></tbody>
                        </table>
                        <p id="noLinks" class="empty-state hidden">No accessible links found to analyze.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>